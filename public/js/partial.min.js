var partial=function(){var getPage=function(e,t,a){var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return r.open("GET",e),r.onreadystatechange=function(){if(r.readyState>3&&200==r.status){var e=t.getAttribute("noscript"),n=t.getAttribute("ajax");if(void 0!=n)return void HandleAjax(t,JSON.parse(r.responseText),a);if(t.innerHTML=r.responseText,void 0==e||null==e||"false"==e){for(var i=t.getElementsByTagName("script"),l=0;l<i.length;l++){var o=i[l].getAttribute("src");if(o)getScript(o);else var s=i[l].text;window.eval(s)}var u=t.getElementsByTagName("partial");0!=u.length&&LoadPartials(u)}void 0!==a&&a(t)}},r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(),r},HandleAjax=function(e,t,a){var r=e.querySelectorAll("template");if(0==r.length)throw"Need a template tag inside partial for supporting ajax";var n=r[0].innerHTML;r=Handlebars.compile(n);var i=e.querySelectorAll("view");0==i.length?(i=document.createElement("view"),e.appendChild(i)):i=i[0],i.innerHTML=r(t),void 0!==a&&a(i,t);var l=i.getElementsByTagName("partial");0!=l.length&&LoadPartials(l)},reload=function(e){var t=document.querySelectorAll(e)[0],a="",r=void 0;(void 0!=t||null!=t)&&(a=t.getAttribute("src"),r=t.getAttribute("onload")),LoadAfterDelay(r,t,a,0)},LoadPartials=function(e){for(var t=0;t<e.length;++t){var a=e[t],r=a.getAttribute("src"),n=a.getAttribute("onload"),i=a.getAttribute("loadafter"),l=a.getAttribute("autorefresh"),o=!1;void 0===i||null===i?i=0:(i=isNaN(i)?0:parseInt(i),o=!0),l=void 0===l||null===l?0:isNaN(l)?0:parseInt(l),l>0?(i=l,setInterval(LoadAfterDelay,i,n,a,r,i),o||LoadAfterDelay(n,a,r,0)):LoadAfterDelay(n,a,r,i)}},getScript=function(url){var xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return xhr.open("GET",url),xhr.onreadystatechange=function(){xhr.readyState>3&&200==xhr.status&&eval(xhr.responseText)},xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.send(),xhr},LoadAfterDelay=function(func,item,src,loadafter){var loadIf=void 0==item.getAttribute("loadIf")?!0:eval(item.getAttribute("loadIf"));loadIf&&setTimeout(function(){func=eval(func),null==func||void 0==func?getPage(src,item):getPage(src,item,func)},loadafter)},partials=document.getElementsByTagName("partial");return 0!=partials.length&&LoadPartials(partials),{getPage:getPage,reload:reload}}();
